{% extends "base.html" %}

{% block content %}
    <link rel="stylesheet" href="{{ url_for('static', filename='profile_css.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='base_css.css') }}">
    <div class="profile-page">
    <h2>{{ user.dynamic_info.username }}的个人主页</h2>

    <!-- 显示用户头像 -->
    <div class="avatar-container">
        <img src="{{url_for('static',filename=img_path)}}" alt="头像" class="avatar">
    </div>

    <button id="uploadAvatarBtn">上传头像</button>

    <!-- 模态窗口 -->
    <div id="uploadAvatarModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>上传新头像</h3>
            <form method="POST" action="{{ url_for('change_img', user_id=user.id) }}" enctype="multipart/form-data">
                <label for="file">选择文件:</label>
                <input type="file" name="file" id="file" accept="image/*" required>
                <br>
                <input type="submit" value="上传">
            </form>
        </div>
    </div>

    <!-- 用户信息 -->
    <div class="user-info">
        <p><span class="info-label">真实姓名:</span> {{ user.dynamic_info.real_name or '未填写' }}</p>
        <p><span class="info-label">邮箱:</span> {{ user.dynamic_info.email or '未填写' }}</p>
        <p><span class="info-label">手机号:</span> {{ user.dynamic_info.phone or '未填写' }}</p>
        <p><span class="info-label">学号:</span> {{ user.dynamic_info.student_id or '未填写' }}</p>
        <p><span class="info-label">注册时间:</span> {{ user.static_info.registered_on }}</p>
        <p><span class="info-label">上次登录时间:</span> {{ user.static_info.last_login }}</p>
        <p><span class="info-label">权限等级:</span> {{ user.static_info.permission_level }}</p>
    </div>

    <a href="{{ url_for('revise_info', user_id=user.id) }}" class="btn btn-primary">修改个人信息</a>

    <a href="{{ url_for('change_password', user_id=user.id) }}" class="btn btn-primary">修改密码</a>

    <!--跳转user_filelist.html页面，显示用户上传的文件列表-->
    <a href="{{ url_for('user_filelist', user_id=user.id) }}" class="btn btn-primary">文件列表</a>


    </div>


    <script src="{{ url_for('static', filename='js/modal.js') }}"></script>

{% endblock %}
